module.exports=(()=>{"use strict";var e={351:function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=n(r(87));const s=r(278);function issueCommand(e,t,r){const n=new Command(e,t,r);process.stdout.write(n.toString()+o.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const u="::";class Command{constructor(e,t,r){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=r}toString(){let e=u+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=true;for(const r in this.properties){if(this.properties.hasOwnProperty(r)){const n=this.properties[r];if(n){if(t){t=false}else{e+=","}e+=`${r}=${escapeProperty(n)}`}}}}e+=`${u}${escapeData(this.message)}`;return e}}function escapeData(e){return s.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(e){return s.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},186:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const s=r(351);const u=r(717);const i=r(278);const a=o(r(87));const c=o(r(622));var l;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(l=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){const r=i.toCommandValue(t);process.env[e]=r;const n=process.env["GITHUB_ENV"]||"";if(n){const t="_GitHubActionsFileCommandDelimeter_";const n=`${e}<<${t}${a.EOL}${r}${a.EOL}${t}`;u.issueCommand("ENV",n)}else{s.issueCommand("set-env",{name:e},r)}}t.exportVariable=exportVariable;function setSecret(e){s.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){const t=process.env["GITHUB_PATH"]||"";if(t){u.issueCommand("PATH",e)}else{s.issueCommand("add-path",{},e)}process.env["PATH"]=`${e}${c.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r){throw new Error(`Input required and not supplied: ${e}`)}return r.trim()}t.getInput=getInput;function setOutput(e,t){s.issueCommand("set-output",{name:e},t)}t.setOutput=setOutput;function setCommandEcho(e){s.issue("echo",e?"on":"off")}t.setCommandEcho=setCommandEcho;function setFailed(e){process.exitCode=l.Failure;error(e)}t.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}t.isDebug=isDebug;function debug(e){s.issueCommand("debug",{},e)}t.debug=debug;function error(e){s.issue("error",e instanceof Error?e.toString():e)}t.error=error;function warning(e){s.issue("warning",e instanceof Error?e.toString():e)}t.warning=warning;function info(e){process.stdout.write(e+a.EOL)}t.info=info;function startGroup(e){s.issue("group",e)}t.startGroup=startGroup;function endGroup(){s.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return n(this,void 0,void 0,function*(){startGroup(e);let r;try{r=yield t()}finally{endGroup()}return r})}t.group=group;function saveState(e,t){s.issueCommand("save-state",{name:e},t)}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState},717:function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=n(r(747));const s=n(r(87));const u=r(278);function issueCommand(e,t){const r=process.env[`GITHUB_${e}`];if(!r){throw new Error(`Unable to find environment variable for file command ${e}`)}if(!o.existsSync(r)){throw new Error(`Missing file at path: ${r}`)}o.appendFileSync(r,`${u.toCommandValue(t)}${s.EOL}`,{encoding:"utf8"})}t.issueCommand=issueCommand},278:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});function toCommandValue(e){if(e===null||e===undefined){return""}else if(typeof e==="string"||e instanceof String){return e}return JSON.stringify(e)}t.toCommandValue=toCommandValue},841:(e,t,r)=>{r.r(t);r.d(t,{default:()=>run});var n=r(186);var o=r(747);var s=r(622);var u;(function(e){e["unique"]="unique";e["duplicate"]="duplicate"})(u||(u={}));const i=e=>Array.isArray(e)?e[0]:e;const a=e=>{if(!(0,o.existsSync)(e)){(0,o.mkdirSync)(e,{recursive:true})}};const c=(e,t)=>{return!e.hasOwnProperty(t)&&t in e};const l=(e,t)=>{const r=e.__proto__||e.constructor.prototype;return t in e||t in r||r[t]===e[t]};const p=(e,t,r=4)=>{return JSON.stringify(e,t,r)};const f=(e,t)=>{return JSON.parse(e,t)};const d=e=>{return{}.toString.call(e).match(/\s(\w+)/)[1].toLowerCase()};const g=e=>{return e===null};const m=e=>{return e===undefined};const y=e=>{return g(e)||m(e)||typeof e==="undefined"};const _=e=>{return!g(e)};const h=e=>{return!m(e)};const b=e=>{return _(e)&&(typeof e==="string"||d(e)==="string")};const v=e=>{return _(e)&&Object.prototype.toString.apply(e)==="[object Array]"};const w=e=>{return _(e)&&Object.prototype.toString.apply(e)==="[object Object]"};const $=e=>{return _(e)&&typeof e==="function"&&e.constructor&&e.apply};const S=e=>{return _(e)&&(typeof e==="number"||d(e)==="number")&&isFinite(e)};var C;(function(e){e["general_error"]="GeneralError";e["parser_error"]="ParserError";e["validation_error"]="ValidationError";e["type_error"]="TypeError";e["value_error"]="ValueError"})(C||(C={}));class ExtendableError extends Error{constructor(e,t){super(t);this.type=e;this.message=t;Object.defineProperty(this,"message",{configurable:true,enumerable:false,value:t,writable:true});Object.defineProperty(this,"type",{configurable:true,enumerable:false,value:e,writable:true});Object.defineProperty(this,"name",{configurable:true,enumerable:false,value:this.constructor.name,writable:true});if(l(Error,"captureStackTrace")){Error.captureStackTrace(this,this.constructor);return}Object.defineProperty(this,"stack",{configurable:true,enumerable:false,value:new Error(t).stack,writable:true})}}class GeneralError extends ExtendableError{constructor(e,t,...r){super(e,t);this.type=e;this.message=t;this.args=[];this.args=r}logMessage(){console.error(this.message,this.args)}}class ValueError extends GeneralError{constructor(e,...t){super(C.value_error,e,t);this.message=e}}const E=(e,...t)=>{return new ValueError(e,t)};const O=(e,t)=>{if(e===t){return 0}if(typeof e===typeof t){if(hasProperty(e,"compareTo")){return e.compareTo(t)}return e<t?-1:1}return typeof e<typeof t?-1:1};const P=(e,t)=>{return(e===null)-(t===null)||+(e>t)||-(e<t)};const j=(e,t,r="asc")=>{let n=e===null?"":`${e}`;let o=t===null?"":`${t}`;if(r!=="asc"){o=[n,n=o][0]}return n.localeCompare(o)};const x=(e,t,r="asc")=>{let n=e.toLowerCase();let o=t.toLowerCase();if(r!=="asc"){o=[n,n=o][0]}return n<o?-1:n>o?1:0};const q=(e,t,r="asc")=>{let n=e===null?"":`${e}`;let o=t===null?"":`${t}`;if(r!=="asc"){o=[n,n=o][0]}return n.toLowerCase().localeCompare(o.toLowerCase())};const I=(e,t,r="asc")=>{let n=e===null?"":`${e}`;let o=t===null?"":`${t}`;if(r!=="asc"){o=[n,n=o][0]}const s=n.length-o.length;return s<0?-1:s?1:0};const T=(e,t)=>{return(r,n)=>{if(w(r)&&w(n)){const o=r[e];const s=n[e];const u=$(t)?t:null;if(u){return u(o,s)}if(typeof o===typeof s){if(w(o)||v(o)){return o.equals(s)}return N(o,s)}return typeof o<typeof s?-1:1}throw E(`Expected object with a valid property < ${String(e)} >`)}};const k=e=>{return(t,r)=>{if(!hasProperty(t,e)){throw valueError(`Property=${String(e)} not exists on object=${t}`)}if(!hasProperty(r,e)){throw valueError(`Property=${String(e)} not exists on object=${r}`)}return O(t[e],r[e])}};const G=(e,t,r)=>{return+(e[r]>t[r])||+(e[r]===t[r])-1};const F=(e,t,r,n="asc")=>{let o=e===null?"":`${e[r]}`;let s=t===null?"":`${t[r]}`;if(o===s){return 0}if(n!=="asc"){s=[o,o=s][0]}return o<s?-1:o>s?1:0};const A=(...e)=>{return(t,r)=>{for(const n of e){const e=n(t,r);if(e!==0){return e}}return 0}};const M=(e,t,r="asc",...n)=>{for(const r of n){e=e[r];t=t[r]}if(r!=="asc"){t=[e,e=t][0]}return e<t?-1:e>t?1:0};const N=(()=>{const e={sensitivity:"base"};const t="en";return(r,n,o="asc",s,u)=>{let i=r===null?"":`${r}`;let a=n===null?"":`${n}`;if(o!=="asc"){a=[i,i=a][0]}const c=b(s)?s:t;const l=w(u)?u:e;const p=(e,t)=>{try{return new Intl.Collator(c,l).compare(e,t)}catch(e){console.log(`ERROR: invalid locale supports collator < ${e.message} >`);return null}};const f=(e,t)=>{try{return new Intl.Collator(c,l).compare(e,t)}catch(e){console.log(`ERROR: invalid supports locales < ${e.message} >`);return null}};let d=p(i,a);if(y(d)){d=f(i,a);if(y(d)){return j(i,a)}}return 0}})();const L=e=>{return(t,r,n)=>{if(t===null||r===null){return(t===null)-(r===null)}const o=e.includes(n)?n:e[0];const s=t.normalize(o);const u=r.normalize(o);return+(s>u)||-(s<u)||1}};const V=(e,t)=>{for(const r of t){e=e&&e[r]}return e};const D=(e,t,r)=>{const n=r[r.length-1];r=r.slice(0,r.length-1);for(const t of r){e=e&&e[t]}e[n]=t};const H=async(e,t,r,n)=>{const s=(e,r)=>t===u.unique?e===r:e!==r;const i=n.map(e=>T(e,(e,t)=>x(e,t)));const a=A(...i);const c=(0,o.readFileSync)(e);const l=f(c.toString());const p=V(l,r);if(!v(p)){throw E(`Invalid property data type: ${d(p)}, should be array`)}const g=p.filter((e,t,r)=>s(t,r.findIndex(t=>a(t,e)===0)));D(l,g,r);return l};const R=async(e,t,r)=>{const u=(0,s.join)(e,t);n.info(`Storing JSON data to target file: ${u}`);a(e);(0,o.writeFile)(t,p(r),e=>{if(e){throw e}});return true};async function run(){const e=n.getInput("jsonMode",{required:true});const t=n.getInput("sourceFile",{required:true});const r=n.getInput("targetPath",{required:true});const o=n.getInput("destFile",{required:true});const s=n.getInput("targetProperty",{required:true}).split("/");const i=n.getInput("fields",{required:true}).split(",");const a=u[e];try{n.info(`Processing JSON file by path: ${t}, mode: ${a}, target property: ${s}, fields: ${i}`);const e=await H(t,a,s,i);const u=await R(r,o,e);n.setOutput("status",u)}catch(e){n.setFailed(`Cannot store JSON data to file: ${o}, path: ${r}, message: ${e.message}`)}}run()},747:e=>{e.exports=require("fs")},87:e=>{e.exports=require("os")},622:e=>{e.exports=require("path")}};var t={};function __nccwpck_require__(r){if(t[r]){return t[r].exports}var n=t[r]={exports:{}};var o=true;try{e[r].call(n.exports,n,n.exports,__nccwpck_require__);o=false}finally{if(o)delete t[r]}return n.exports}(()=>{__nccwpck_require__.d=((e,t)=>{for(var r in t){if(__nccwpck_require__.o(t,r)&&!__nccwpck_require__.o(e,r)){Object.defineProperty(e,r,{enumerable:true,get:t[r]})}}})})();(()=>{__nccwpck_require__.o=((e,t)=>Object.prototype.hasOwnProperty.call(e,t))})();(()=>{__nccwpck_require__.r=(e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})})})();__nccwpck_require__.ab=__dirname+"/";return __nccwpck_require__(841)})();